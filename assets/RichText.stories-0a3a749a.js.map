{"version":3,"file":"RichText.stories-0a3a749a.js","sources":["../../src/components/richText/RichText.tsx"],"sourcesContent":["import { Link, LinkMode, LinkTarget } from '@zepdev/design-system-component-library-react';\nimport { clsx } from 'clsx';\nimport React from 'react';\nimport { Block, EntityMap, RichTextProps } from './rich-text.interface';\n\n// Header Component\nconst Header: React.FC<{ level: 'header-three' | 'header-four'; className?: string; children: React.ReactNode }> = ({\n  level,\n  children,\n}) => {\n  const headerClass =\n    level === 'header-three'\n      ? 'zep-typography-headlineSM-fluid-cqi zep-mb-1'\n      : 'zep-typography-headlineMD-fluid-cqi zep-mb-2';\n  return level === 'header-three' ? (\n    <h3 className={clsx(headerClass)}>{children}</h3>\n  ) : (\n    <h4 className={clsx(headerClass)}>{children}</h4>\n  );\n};\n\n// Paragraph Component\nconst Paragraph: React.FC<{ children: React.ReactNode; className?: string }> = ({ children }) => (\n  <p className=\"zep-mb-2\">{children}</p>\n);\n\n// List Component\nconst ListComponent: React.FC<{ ordered: boolean; className?: string; items: string[] }> = ({ ordered, items }) => (\n  <>\n    {/* <List className=\"zep-mb-2\" type={ordered ? 'numeric' : 'bullet'}>\n      {items.map((item, idx) => (\n        <List.Item key={idx}>{item}</List.Item>\n      ))}\n      </List> */}\n  </>\n);\n\nconst RichText = ({ content, children, textColor }: RichTextProps) => {\n  const containerClass =\n    textColor === 'white'\n      ? '!zep-text-typography-light-100'\n      : textColor === 'black'\n      ? '!zep-text-typography-dark-100'\n      : 'zep-text-indigo-500';\n  const renderBlock = (block: Block, index: number, entityMap: EntityMap) => {\n    const { type, text, inlineStyleRanges = [], entityRanges = [], items = [], ordered } = block;\n\n    const getSegments = (text: string, ranges: any[], entityMap?: EntityMap, type: 'style' | 'entity' = 'style') => {\n      let segments: Array<{ text: string; style?: string | null; url?: string | null }> = [];\n      let lastIndex = 0;\n\n      ranges.forEach(({ offset, length, style, key }) => {\n        if (offset > lastIndex) {\n          segments.push({ text: text.slice(lastIndex, offset), style: null, url: null });\n        }\n        const segmentText = text.slice(offset, offset + length);\n        const segmentStyle = type === 'style' ? style || null : null;\n        const segmentUrl = type === 'entity' && key !== undefined && entityMap ? entityMap[key].data.url : null;\n\n        segments.push({ text: segmentText, style: segmentStyle, url: segmentUrl });\n        lastIndex = offset + length;\n      });\n\n      if (lastIndex < text.length) {\n        segments.push({ text: text.slice(lastIndex), style: null, url: null });\n      }\n\n      return segments;\n    };\n\n    const entitySegments = getSegments(text || '', entityRanges, entityMap, 'entity');\n    const finalSegments = entitySegments.flatMap((segment, entityIndex) => {\n      if (segment.url) {\n        return (\n          <Link\n            key={entityIndex}\n            href={segment.url}\n            as=\"span\"\n            icon=\"\"\n            label={segment.text}\n            mode={LinkMode.Inline}\n            target={LinkTarget.Blank}\n          />\n        );\n      }\n      const styleSegments = getSegments(segment.text, inlineStyleRanges, undefined, 'style');\n      return styleSegments.map((styleSegment, styleIndex) => {\n        if (styleSegment.style === 'BOLD') {\n          return (\n            <span className=\"zep-typography-bodyStrong\" key={entityIndex + '-' + styleIndex}>\n              {styleSegment.text}\n            </span>\n          );\n        } else if (styleSegment.style === 'ITALIC') {\n          return (\n            <span className=\"zep-italic\" key={entityIndex + '-' + styleIndex}>\n              {styleSegment.text}\n            </span>\n          );\n        }\n        return <span key={entityIndex + '-' + styleIndex}>{styleSegment.text}</span>;\n      });\n    });\n\n    // resove unique key issue\n    const contentElement = (\n      <span className={clsx(containerClass)}>\n        {finalSegments.map((segment, segmentIndex) => (\n          <span key={`${index}-${segmentIndex}`}>{segment}</span>\n        ))}\n      </span>\n    );\n\n    switch (type) {\n      case 'header-three':\n      case 'header-four':\n        return (\n          <Header className={clsx(containerClass, 'zep-font-500')} level={type} key={index}>\n            {contentElement}\n          </Header>\n        );\n      case 'unstyled':\n        return (\n          <Paragraph className={containerClass} key={index}>\n            {contentElement}\n          </Paragraph>\n        );\n      case 'list':\n        return <ListComponent className={containerClass} ordered={!!ordered} items={items} key={index} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div\n      className={clsx(containerClass, 'zep-container', 'md:zep-w-[944px]', 'zep-mx-auto')}\n      data-testid=\"zep-richtext\"\n    >\n      {content.blocks.map((block, index) => renderBlock(block, index, content.entityMap))}\n      {content.images.map((image, index) => (\n        <div key={index}>\n          <img className=\"zep-h-auto zep-max-w-full zep-mb-1\" src={image.src} alt={image.alt} />\n        </div>\n      ))}\n      {children}\n    </div>\n  );\n};\n\nexport { RichText };\n"],"names":["Header","level","children","headerClass","jsxDEV","clsx","this","Paragraph","ListComponent","ordered","items","Fragment","RichText","content","textColor","containerClass","renderBlock","block","index","entityMap","type","text","inlineStyleRanges","entityRanges","getSegments","text2","ranges","entityMap2","type2","segments","lastIndex","offset","length","style","key","segmentText","segmentStyle","segmentUrl","finalSegments","segment","entityIndex","Link","LinkMode","LinkTarget","styleSegment","styleIndex","contentElement","segmentIndex","image"],"mappings":"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"}